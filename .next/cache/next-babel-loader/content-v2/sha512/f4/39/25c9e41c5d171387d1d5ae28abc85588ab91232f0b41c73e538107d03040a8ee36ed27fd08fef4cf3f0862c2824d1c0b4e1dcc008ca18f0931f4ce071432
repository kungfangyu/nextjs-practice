{"ast":null,"code":"/*\n * @Date: 2021-10-21 15:25:47\n * @LastEditors: Fane Kung\n * @LastEditTime: 2021-10-21 17:32:28\n * @FilePath: /next-js-practice/pages/api/new-meetup.js\n */\nimport { MongoClient } from 'mongodb'; // /api/new-meetup\n// /POST /api/new-meetup\n\nasync function handler(req, res) {\n  if (req.method === 'POST') {\n    const data = req.body; // const { title, image, address, description } = data;\n\n    const client = await MongoClient.connect('mongodb+srv://Fane:ATFDyq3JQ0bkTuiN@cluster0.9rbz6.mongodb.net/meetups?retryWrites=true&w=majority');\n    const db = client.db();\n    const meetupsCollection = db.collection('meetups'); //也可以跟資料庫名稱一樣（nextPracticeMeetups）\n\n    const result = await meetupsCollection.insertOne(data); // mongodb的內置查詢命令之一用於在集合中插入一個新的文檔（數據）\n\n    console.log(result);\n    client.close(); //關閉數據連接\n\n    res.status(201).json({\n      message: 'Meetup inserted!'\n    });\n  }\n}\n\nexport default handler;","map":null,"metadata":{},"sourceType":"module"}